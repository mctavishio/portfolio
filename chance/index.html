<!DOCTYPE html>
<html lang="en">
<head>
	<title>chance</title>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
	<meta name="description" content="chance" />
	<meta name="author" content="kathy mctavish">
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/manifest.json">
	<script type="application/ld+json">
		{
			"@context": "http://schema.org",
			"@type": "WebPage",
			"name": "chance",
			"breadcrumb": "mctavish.io > chance > home",
          		"url": "https://www.mctavish.io/chance/index.html",
			"description": "chance",
			"datePublished": "2021-02-03",
          		"image": "https://www.mctavish.io/apple-touch-icon.png",
			"author": "https://mctavish.io/bio.html",
			"license": "http://creativecommons.org/licenses/by-nc-sa/3.0/us/deed.en_US"
		}
	</script>
	<link rel="stylesheet" href="../css/fieldnotes.css"/>
	<style>
		html {
			font-family: 'Trebuchet MS', Tahoma, Verdana, Helvetica, Arial, Tahoma, 'Trebuchet MS', sans-serif;
			font-family: var(--sans);
		}
	</style>
</head>
<body id="top" >
<div id="subtextframe" class="frame zlowest"></div>
<div id="svgframe" class="frame zlow"><svg xmlns="http://www.w3.org/2000/svg" id="svg" class="frame"></svg></div>
<div id="wordframe" class="frame z0"></div>

<div id="contentframe" class="absolute zhighest">
<div id="mainflex">
<main id="main" class="expand wide" data-state="expanded">	
<header>
	<h1>chance</h1>
</header>
<!-- <ul data-role="narrator" class="info compress">
	<li class="title typewriter" title="telegraph" id="telegraph"></li>
	<li class="title  typewriter" title="clock" id="clock">here | now</li>
</ul> -->
<ul>
	<li><a href="#" id="soundlink" class="corelink">turn on sound</a></li>
	<li><a href="../index.html" id="homelink" class="corelink">return to portfolio</a></li>
</ul>
<hr/>
<ul >
	<li><a href="#summary" class="corelink">summary</a></li>
	<li><a href="#when" class="corelink">when & where</a></li>
	<li><a href="#about" class="corelink">about</a></li>
	<li><a href="#media" class="corelink">media samples</a></li>
	<!-- <li><a href="#animation" class="corelink">live animation</a></li> -->
	<li><a href="#other" class="corelink">other</a></li>
	<li><a href="#stillmediasketches" class="corelink">still media sketches</a></li>
	<li><a href="#thanks" class="corelink">thanks</a></li>
</ul>
<hr/>
<article id="summary" >
	<header>
		<h1><a href="#top">^</a> summary</h1>
		<h2>(text by the Tweed)</h2>
	</header>
	<p>Chance is a synergetic installation that combines code, image, and sound to create a cross-sensory, polyphonic experience. A landscape of painted walls and multi-channel sound encloses the viewer. Choreographed by code, a circle of machine quartets investigate chance, emergence, friction, resonance and change.</p>
</article>
<article id="when" >
	<header>
		<h1><a href="#top">^</a> when &amp; where</h1>
	</header>
	<p>the exhibit "chance" ran from october 19, 2017 - october 2018 at the <a href="https://www.d.umn.edu/tma/">tweed museum of art.</a> </p>
	<p>an opening celebration was held the evening of october 19, 2017.</p>
	<h5>other events</h5>
	<p>
		<ul>
			<li><b>Poetry reading &amp; book release of <i>"chance ::: poems"</i> </b> ::: February 20, 2018 6pm</li>
			<li><b>Mags David &amp; Sing! A Women's Chorus &amp; live performance</b> ::: March 13, 2018 6:30pm</li>
			<li><b>Tweevening ::: Kathy McTavish talked about her creative process</b> ::: April 3, 2018 6:00pm</li>
		</ul>
	</p>
</article>

<article id="media">
	<header>
		<h1><a href="#top">^</a> media work samples</h1>
	</header>
	<h5>chance screen recordings and installation footage</h5>
	<div class="vimeowrapper16x9" >
		<iframe src="https://player.vimeo.com/video/260870264?title=0&amp;byline=0&amp;portrait=0" width="600" height="338"frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
	</div>
	<h5>chance screen recordings (early version) ::: 1 screen</h5>
	<div class="vimeowrapper16x9" >
		<iframe src="https://player.vimeo.com/video/220385055?title=0&amp;byline=0&amp;portrait=0" width="600" height="338"frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
	</div>
	<!--
	<h5><a href="https://vimeo.com/220416206">prelude to chance screen recordings / circles ::: 1 screen</a></h5>
	<div class="vimeowrapper16x9" >
		<iframe src="https://player.vimeo.com/video/220416206?title=0&amp;byline=0&amp;portrait=0" width="600" height="338"frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
	</div>
	<h5><a href="http://vimeo.com/220415387">prelude to chance screen recordings / lines ::: 1 screen</a></h5>
	<div class="vimeowrapper16x9" >
		<iframe src="https://player.vimeo.com/video/220415387?title=0&amp;byline=0&amp;portrait=0" width="600" height="338"frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
	</div>-->
	<h5>sound sketches</h5>
	<p>sound is generative in the exhibit itself ::: a networked orchestration / sound mobile made up of small buffers of found sound mixed using the Web Audio API</p>
	<ul>
	<li>track  &raquo; <a href="http://blueboatfilms.com/sound/northernspark20170603_final.mp3">northern spark 2017 ::: prelude to chance</a></li>
	<li>track  &raquo; <a href="http://blueboatfilms.com/sound/chanceSketch9_3.mp3">minimalist soundscape for out-of-phase multiple channels</a></li>
	</ul>
</article>
<!-- <article id="animations">
	<header>
		<h1>animation</h1>
		<h2></h2>
	</header>
	<div class="textContent">
		<p>&rarr; <a action="traverse" href="core.html" title= "core animation used in installation">simplified version of the  networked animation used in installation</a></p>
	</div>
</article> -->
<article id="keywords" >
	<header>
		<h1><a href="#top">^</a> keywords</h1>
	</header>
		<p>chance, uncertainty, randomness, variability, noise, polyphony, ecosystems, multi-threadedness, dynamical systems, networked art, generative art, algorithmic art, orchestration, language, humans and machines, webs</p>
</article>
<article id="about" >
	<header>
		<h1><a href="#top">^</a> about</h1>
	</header>
	<p>Chance is a synergetic installation that combines code, image, and sound to create a cross-sensory, polyphonic experience. A landscape of painted walls and multi-channel sound encloses the viewer. Choreographed by code, a circle of machine quartets investigate chance, emergence, friction, resonance and change ::: a cloud orchestration.
	</p><p>
	Chance opens October 19, 2017. The year-long exhibit will be a living, evolving space ::: a residency / habitation / research lab / performance space. Printed artifacts will be left in the space to give the feel of blueprints / notes ::: a score. The Sax gallery at the Tweed is a luminous space. Its many skylights filter shifting seasons and variable weather patterns ::: a photosynthetic recitation. It provides a sanctuary ::: a place for rest and reflection.
	</p><p>
	This is a time of great planetary change and political turmoil. Chance has evolved under these skies. There is a machine / human friction present in the space. As the work evolves I have a sense of trembling before god ::: a struggle towards language &amp; coherence ::: an ongoing ritual of conceal &amp; reveal / imprint &amp; erasure / struggle &amp; resistance. As a queer artist I inhabit a landscape of the infinite between. This work embeds an infinite series of choreographed transitions. Machine renderers will perform their twists and turns (their monitor-bound between-ness) 24/7 for a year. The marks across the wall echo the arc of my body.
	</p><p>
	Chance explores the intersections between art &amp; technology / humans &amp; machines / polyphony &amp; mathematical systems. My generative artwork is inspired by the mathematical representations of ecosystems that I studied while a student at the University of MN, Duluth. Mathematical models are often used to represent physical systems ::: our ideas about how the world works. They are like a score / orchestration / script / generative code. Algorithmic blueprints draw the contours of change and movement ::: convergences, divergences, emergent patterns and cascading, system-level impacts. Mathematical models can depict the complexity and profound tension between independent threads and the bounds of interconnected webs ::: the polyphony of life. 
	</p><p>
	Code is a literature ::: a pattern language ::: a score. It is a choreography ::: a performance. A code renderer is the weaver ::: the mill ::: the alchemist ::: the wizard. Code is a spell ::: an incantation ::: an intent. When code is performed it is an activation of text ::: a linguistic gymnastics. 
	</p><p>
	In a perfect confluence of electricity, network, rhythm, memory, processing, action &amp; reactions
	a program comes to life ::: Pinocchio  ::: a real boi at last. The program (the <a href="https://en.wikipedia.org/wiki/A_Cyborg_Manifesto">cybernetic</a> <a href="https://en.wikipedia.org/wiki/Leslie_Feinberg">ze</a>) speaks to us, calculates for us, responds to our touch : our keystrokes. It becomes our mirror :|: our cyborg self ::: our memory.
	</p>
		
</article>

<article id="other" >
	<header>
		<h1><a href="#top">^</a> other thoughts</h1>
	</header>
	<p>
	Chance is a frayed thread, a stochastic cloud, a pointillist field, a variance, a complexity, an uncertainty, a ragged line. Chance is a prayer ::: slim window of chance ::: survival in this time of profound climatic change. Evolution requires variability, chance and fruitful deviation. A system's ability to adapt to change depends on its ability to mutate ::: on trial &amp; error &amp; improvisation.
	</p><p>
	This installation combines code, paint, and sound. A pure tone can be modeled with a sine wave. Sounds produced by horsehair, pine pitch, metal, wood, friction, sinew, bone, breath and reed are a complex crash and tumult of waves more like an ocean than an oscilloscope. Worldly sound is gorgeous in its noise and deviance from pure tone. The exhibit blends the generated hum of sine waves hovering near 4 tonal centers with a subtle chordal wash of natural sound.
	</p><p>
	Indeterminacy ::: a line opens into a surface of possibilities. Random numbers ::: probabilities ::: a pattern emerges from the haze. Time &amp; space carve out convergence or dissolution ::: balance, extinction or chaos. 
	</p><p>
	Connectance ::: ecosystems embody the tension / balance between individual life threads and the complex web of community. Resilience of the whole depends on intricate relationships between the parts. To live in a networked, interdependent system is to be bound but also to be fed.
	</p>
</article>
<article id="press" >
	<header>
		<h1><a href="#top">^</a> press</h1>
	</header>
	<p>
		<a href="../resources/chance_essay_ratliff.pdf">Essay by Jamie Ratliff</a>
	</p>
	<p>
		<a href="http://kumd.org/post/radio-gallery-chance#stream/0">Radio Gallery: Interview by Maija Jenson for KUMD, Dec 6, 2017</a>
	</p>
	<p>
		<a href="https://www.perfectduluthday.com/2017/12/01/moving-image-impressions-headlong-void/">Moving Image Impressions – Headlong into the Void by Allen Killian-Moore for Perfect Day Duluth, December 01, 2017</a>
	</p>
	<p>
		<a href="https://pioneerproductions.blogspot.com/2017/10/kathy-mctavishs-chance-unfolds-at-tweed.html">Kathy McTavish's Chance Unfolds at the Tweed by Ed Newman, October 21, 2017</a>
	</p>
	<p>
		<a href="https://www.youtube.com/watch?v=Pw1rO4uWOp0">University of MN, Duluth Interview, August 15, 2017</a>
	</p>
	<p>
		<a href="https://www.facebook.com/CBS3Duluth/videos/521371374883651/">Live, Local CBS 3 Duluth Interview, October 23, 2017</a>
	</p>
	<p>
		<a href="http://www.duluthnewstribune.com/lifestyle/4371022-kathy-mctavishs-yearlong-exhibition-tweed-offers-ever-changing-sensory-experience">Duluth News Tribune Interview by Christa Lawler, December 8, 2017</a>
	</p>
	<p>
		<a href="http://www.wdio.com/GMN/artist-kathy-mctavish-art-chance/4644888/">WDIO Interview, October 24, 2017</a>
	</p>	
</article>
<article id="stillmediasketches" >
	<header>
		<h1><a href="#top">^</a> still media sketches</h1>
		<h2>generated tests</h2>
	</header>
	<ul class="circle zhighest">
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_core_sketch0.pdf" title="sketch">core sketchset ::: sketch 0</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_core_sketch1.pdf" title="sketch">core sketchset ::: sketch 1</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_core_sketch3.pdf" title="sketch">core sketchset ::: sketch 3</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_core_sketch4.pdf" title="sketch">core sketchset ::: sketch 4</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_core_sketch5.pdf" title="sketch">core sketchset ::: sketch 5a</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_core_sketch5b.pdf" title="sketch">core sketchset ::: sketch 5b</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_core_sketch5c.pdf" title="sketch">core sketchset ::: sketch 5c</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_core_sketch6.pdf" title="sketch">core sketchset ::: sketch 6</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_core_sketch7.pdf" title="sketch">core sketchset ::: sketch 7</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_core_sketch8.pdf" title="sketch">core sketchset ::: sketch 8</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_core_sketch9.pdf" title="sketch">core sketchset ::: sketch 9a</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_core_sketch9b.pdf" title="sketch">core sketchset ::: sketch 9b</a></li>
		<!--
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_circles_sketch0.pdf" title="sketch">circles sketchset ::: sketch 0</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_circles_sketch1.pdf" title="sketch">circles sketchset ::: sketch 1</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_circles_sketch2.pdf" title="sketch">circles sketchset ::: sketch 2</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_circles_sketch3.pdf" title="sketch">circles sketchset ::: sketch 3</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_circles_sketch4.pdf" title="sketch">circles sketchset ::: sketch 4</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_lines_sketch0.pdf" title="sketch">lines sketchset ::: sketch 0</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_lines_sketch1.pdf" title="sketch">lines sketchset ::: sketch 1</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_lines_sketch2.pdf" title="sketch">lines sketchset ::: sketch 2</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_lines_sketch3.pdf" title="sketch">lines sketchset ::: sketch 3</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_lines_sketch4.pdf" title="sketch">lines sketchset ::: sketch 4</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_lines_sketch5.pdf" title="sketch">lines sketchset ::: sketch 5</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_lines_sketch6.pdf" title="sketch">lines sketchset ::: sketch 6</a></li>
		<li><a href="http://www.blueboatfilms.com/stills/chance/chance20170623_lines_sketch7.pdf" title="sketch">lines sketchset ::: sketch 7</a></li>	
		-->			
	</ul>
</article>
<article id="thanks" >
	<header>
		<h1><a href="#top">^</a> thank you</h1>
		<h2></h2>
	</header>
	<div>
		<img src="../data/stills/legacy_logo_bw_reverse.jpg" style="width:48%; max-width:200px;" />
		<img src="../data/stills/msab_logo_bw.jpg" style="width:48%; max-width:200px;"/>
	</div>
	<p> Kathy McTavish is a fiscal year 2017 recipient of an Artist Initiative grant from the Minnesota State Arts Board. This activity is made possible by the voters of Minnesota through a grant from the Minnesota State Arts Board, thanks to a legislative appropriation from the arts and cultural heritage fund.
	</p>
	<p>
		Exhibition also funded by Tweed Museum of Art, UMD and the Marguerite L. Gilmore Charitable Foundation Fund.
	</p>
	<p>Funding for an early prototype was provided by the Arrowhead Regional Arts Council.</p>
</article>

<audio loop=true id="audio1">
  <source src="https://storage.googleapis.com/www.blueboatfilms.com/sound/chanceSketch9_3.mp3" type="audio/mpeg">
  Your browser does not support the audio tag.
</audio>

</main>
</div>
</div>
</body>
<script src="../code/velocity.min.js"></script>
<script src="../code/kefir201911.min.js"></script>
<!-- <script src="code/atlasabsence.js"></script> -->
<script>
let width = window.innerWidth, height = window.innerHeight;
let min = Math.min(width, height), max = Math.max(width, height);
let version = (min < 680 || max < 980) ? "small" : "large";
let v = version === "small" ? 0 : 1;
let z = {};
z.tools = {
	randominteger: (min, max) => {
		return Math.floor( min + Math.random()*(max-min));
	},
	logmsg: function(msg) {
		try { 
			console.log("### ::: " + msg); 
		}
		catch(err) { z.tools.logerror(err) }
	},
	logerror: function(error) {
		try { console.log("rusty error ... " + error); }
		catch(err) {}
	},
	randomhighharmonic: () => {
		let multipliers = [10.0, 12.5, 13.33, 15, 20];
		return multipliers[ z.tools.randominteger( 0, multipliers.length) ];
	},
	randomharmonic: () => {
		let multipliers = [5, 7.5, 10.0, 12.5, 13.33, 15, 20];
		return multipliers[ z.tools.randominteger( 0, multipliers.length) ];
	},
	randomlowharmonic: () => {
		let multipliers = [5, 7.5, 10.0, 12.5, 13.33, 15, 20];
		return multipliers[ z.tools.randominteger( 0, multipliers.length) ]/2;
	},
	randomkey: (object) => {
		let keys = Object.keys(object);
		let key = keys[z.tools.randominteger(0,keys.length)];
		// z.tools.logmsg("key = " + key);
		return key;
	},
	datestr: (date, options) => {
		if(options===undefined) options = {year: "numeric", month: "2-digit", day: "numeric", hour12: true, hour: "2-digit", minute: "2-digit", second: "2-digit"};
		return date.toLocaleTimeString("en-US", options);
		//new Date().toLocaleTimeString("en-US", {year: "numeric", month: "2-digit", day: "numeric", hour12: true, hour: "2-digit", minute: "2-digit", second: "2-digit"});
	},
	togrid: (min=1, max=1, x=1, ndivisions=1) => {
		let dx = Math.floor( (max-min) / ndivisions );
		return Math.floor( ( x-min+dx/2)/dx )*dx + min;
	},
};
//core elements
z.elements = ( () => {
	return {
		body: { el: document.querySelector("body") },
		main: { el: document.querySelector("main") },
		// clock: { el: document.querySelector("#clock") },
		// telegraph: { el: document.querySelector("#telegraph") },
		svg:  { el: document.querySelector("#svg") },
		frames: ["subtextframe", "svgframe", "wordframe", "contentframe"].reduce( (acc, id) => {
			z.tools.logmsg("create frame element ::: " + id);
			acc[id] = { el: document.querySelector("#"+id) };
			return acc;
		}, {}),
	}
})()
	
z.streams = {
	clock: ( () => {
	let dt = 1;
	let date0 = new Date();
	let t0 = Math.floor(date0.getTime()/1000);
	let state0 = { dt: dt, count: 0, date: date0, t: t0, t0: t0 };
	return Kefir.withInterval( dt*1000, emitter => { emitter.emit( { date: new Date() } ) })
			.scan( (state, e) => { 
				state.date = e.date;
				state.t = Math.floor(e.date.getTime()/1000);
				state.count = state.count + 1;
				return state;
			}, state0  )
	})( ),
	dimensions: ( () => {
		let dt = .4;
		const ngrids=[2,2], npasts=[0,0];
		let state0 = { dt: dt, count: 0,
			grid: { nrows: ngrids[v], ncols: ngrids[v], dx: Math.floor(width/ngrids[v]), dy: Math.floor(height/ngrids[v]), sw: 12, pastn: npasts[v] },
			width: width, height: height, 
			max: max, min: min, 
		};
		return Kefir.fromEvents(window, "resize").throttle(dt*1000)
			.scan( (state,e) => {
				state.width = window.innerWidth;
				state.height = window.innerHeight;
				state.max = Math.max(state.width, state.height);
				state.min = Math.min(state.width, state.height);
				state.grid.dx = Math.floor(state.width/state.grid.ncols);
				state.grid.dy = Math.floor(state.height/state.grid.nrows);
				state.grid.sw = Math.floor(Math.max(state.grid.dx*.03, state.grid.dy*.03, 4));
				return state
			}, state0) 
	})( ),
};

z.draw = z => {
	let ntimings = 32;
	let dtiming = Math.floor(400/ntimings);
	const timings = [...Array(ntimings).keys()].reduce( (acc, j) => {
		let duration = 500+(j*dtiming);
		acc[j] = [duration, 900-duration];
	return acc;
	}, []);

	//controls
	( () => { 
		let soundlink = document.querySelector("#soundlink");
		let telegraph = document.querySelector("#telegraph");
		let soundplaying = false;
		Kefir.fromEvents(soundlink, "click").onValue( e => {
			z.tools.logmsg("play sound !");
			if(!soundplaying) { 
				try {
					document.querySelector("#audio1").play();
					z.tools.logmsg("playback resumed");
					// telegraph.innerHTML =  "(sound on)";
					soundplaying = true;
					soundlink.innerText = "turn off sound";
					soundlink.classList.add("active");
				} catch(e) { z.tools.logerror("dashboard ::: resumeaudio " + e) } 
			}
			else { 
				try {
					document.querySelector("#audio1").pause();
					// telegraph.innerHTML =  "(sound off)";
					soundplaying = false;
					soundlink.innerText = "turn on sound";
					soundlink.classList.remove("active");
				} catch(e) { z.tools.logerror("dashboard ::: suspendaudio " + e) }
			}
		});
	})();
	const playlist = [
		["#fcfbe3", "#191918"], //"warmbw",
		// ["#9a0000", "#fcfbe3", "#191918"], //"warmbwred",
		// ["#fcfbe3", "#191918"], //"warmbw",
		// ["#ffcc00", "#fcfbe3", "#191918"], //"warmbwyellow",
		// ["#fcfbe3", "#191918"], //"warmbw",
		// ["#006699", "#fcfbe3", "#191918"], //"warmbwblue",
	];
	z.streams["color"] = ( dt => {
		let date0 = new Date();
		let t0 = Math.floor(date0.getTime()/1000);
		let state0 = { 
			dt: dt, count: 0,
			choices: playlist[ Math.floor(t0/dt)%playlist.length ]
		};
		return z.streams["clock"].filter( e => e.t%dt===0 )
			.scan( (state, e) => { 
				state.choices = playlist[ Math.floor(e.t/dt)%playlist.length ];
				// state.choices = playlist[ Math.floor(state.count)%playlist.length ];
				state.count = state.count + 1;
				return state;
			}, state0  )
	})( 38 );
	
	z.streams["draw"] = Kefir.combine([z.streams["clock"]], [z.streams["dimensions"], z.streams["color"]], (clock, dimensions, color) => { return {clock:clock, dimensions:dimensions, color:color} })
		.scan( (state, e) => { 
			state.clock = e.clock;
			state.dimensions = e.dimensions;
			state.color = e.color;
			state.count = state.count + 1;
			z.tools.logmsg("color.choices = " + e.color.choices);
			return state;
	}, {clock:{t:0}, dt:1}  );

//box
( dt => {
	const element = document.createElementNS("http://www.w3.org/2000/svg", "rect");
	element.setAttributeNS(null, "id", "box");
	element.setAttributeNS(null, "class", "shape square");
	z.elements["svg"].el.appendChild(element);
	let colors = ["#fcfbe3", "#191918"];
	z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
		try {
			// let color = e.color.choices[z.tools.randominteger(0, e.color.choices.length)];
			Velocity({	
				elements: element, 
				properties: { fillOpacity: 1.0, strokeOpacity: 1.0, fill: colors[1], stroke: colors[0], strokeWidth: z.tools.randominteger(e.dimensions.min/4,e.dimensions.min), strokeDasharray: z.tools.randominteger(e.dimensions.min/10, e.dimensions.min/4), width: e.dimensions.width, height: e.dimensions.height },
				options: { duration: 2000,  delay: 0, easing: "easeInOutQuad" },
			});
		} catch(err) { z.tools.logerror("box animation ::: " + err ) }
	})
})(8);

//line 1
( dt => {
const nelements=[[...Array(4).keys()],[...Array(4).keys()]][v];
const elements = nelements.reduce( (acc, id) => {
	z.tools.logmsg("create line element ::: " + id);
	let el = document.createElementNS("http://www.w3.org/2000/svg", "line");
	el.setAttributeNS(null, "id", "line1_"+ id);
	el.setAttributeNS(null, "class", "shape line");
	z.elements["svg"].el.appendChild(el);
	acc[id] = { el: el };
return acc;
}, []);
const n = elements.length;
const drawings = [
	e => {
		try {
			let count = e.clock.t/dt;
			let timing = timings[z.tools.randominteger(0,timings.length)];
			let duration = Math.floor(dt*timing[0]*n), delay = z.tools.randominteger(0, dt*timing[1]*n/4);
			let j = count%n;
			let element = elements[j];
			let colors = ["#fcfbe3", "#191918"];
			let pigments = ["#006699", "#9a0000", "#ffcc00"];
			// let color = count%n===0 ? "#9a0000" : (count%2===0 ? "#191918" : e.color.choices[z.tools.randominteger(0, e.color.choices.length)]);
			let color = j%n===0 ? pigments[1] : (j%3===1 ? colors[1] : colors[0]);
			let cy = j%2===0 ? 0 : e.dimensions.height;
			// let y1 = -1.0*z.tools.randominteger(0, e.dimensions.height);
			// let y2 = z.tools.randominteger(e.dimensions.height, e.dimensions.height*2);
			let x1 = 0;
			let x2 = e.dimensions.width;
			// Velocity({	
			// 	elements: element.el,
			// 	properties: { strokeOpacity: 1.0, stroke: color},
			// 	options: { duration: duration/2,  delay: delay/2 },
			// });
			Velocity({	
				elements: element.el,
				properties: { strokeOpacity: 1.0, stroke: color, strokeWidth: z.tools.randominteger(e.dimensions.width/4,e.dimensions.width*2), strokeDasharray: z.tools.randominteger(e.dimensions.height/10, e.dimensions.height/2), x1: x1, x2: x2, y1: cy, y2: cy },
				options: { duration: duration,  delay: delay },
			});
		} catch(err) { z.tools.logerror("line animation 1 ::: " + err ) }
	},
];
z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
	drawings[Math.floor(e.clock.t/(dt*elements.length*2))%drawings.length](e);
})
})(1);

//line 2
( dt => {
const nelements=[[...Array(4).keys()],[...Array(4).keys()]][v];
const elements = nelements.reduce( (acc, id) => {
	z.tools.logmsg("create line element ::: " + id);
	let el = document.createElementNS("http://www.w3.org/2000/svg", "line");
	el.setAttributeNS(null, "id", "line2_"+ id);
	el.setAttributeNS(null, "class", "shape line");
	z.elements["svg"].el.appendChild(el);
	acc[id] = { el: el };
return acc;
}, []);
const n = elements.length;
const drawings = [
	e => {
		try {
			let count = e.clock.t/dt;
			let timing = timings[z.tools.randominteger(0,timings.length)];
			let duration = Math.floor(dt*timing[0]*n), delay = z.tools.randominteger(0, dt*timing[1]*n/4);
			let j = count%n;
			let element = elements[j];
			let colors = ["#fcfbe3", "#191918"];
			let pigments = ["#006699", "#9a0000", "#ffcc00"];
			// let color = count%n===0 ? "#9a0000" : (count%2===0 ? "#191918" : e.color.choices[z.tools.randominteger(0, e.color.choices.length)]);
			let color = j%n===0 ? pigments[1] : (j%3===1 ? colors[0] : colors[1]);
			let cx = j%2===0 ? 0 : e.dimensions.width;
			// let y1 = -1.0*z.tools.randominteger(0, e.dimensions.height);
			// let y2 = z.tools.randominteger(e.dimensions.height, e.dimensions.height*2);
			let y1 = 0;
			let y2 = e.dimensions.height;
			// Velocity({	
			// 	elements: element.el,
			// 	properties: { strokeOpacity: 1.0, stroke: color},
			// 	options: { duration: duration/2,  delay: delay/2 },
			// });
			Velocity({	
				elements: element.el,
				properties: { strokeOpacity: 1.0, stroke: color, strokeWidth: z.tools.randominteger(e.dimensions.width/4,e.dimensions.width*2), strokeDasharray: z.tools.randominteger(e.dimensions.height/10, e.dimensions.height/2), x1: cx, x2: cx, y1: y1, y2: y2 },
				options: { duration: duration,  delay: delay },
			});
		} catch(err) { z.tools.logerror("line animation 1 ::: " + err ) }
	},
];
z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
	drawings[Math.floor(e.clock.t/(dt*elements.length*2))%drawings.length](e);
})
})(1);

};


window.addEventListener('load', e => {
   z.draw(z);
  window.scroll(0,0);
  // window.setTimeout(() => { document.querySelector("#contentframe").style.opacity = 1.0 }, 400);
  // window.setTimeout(() => { document.querySelector("#controls").style.backgroundColor = "rgba(0,0,0,0.0)" }, 6800);
});
// window.addEventListener('beforeunload', e => {
// 	window.scroll(0,0);
// });
</script>
</html>