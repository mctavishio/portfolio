<!DOCTYPE html>
<html lang="en">
<head>
	<title>lattice sketch 4</title>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<meta name="description" content="mctavish ::: project lattice ::: sketch 4" />
	<meta name="keywords" content="mctavish net.art generative algorithmic code electronic literature" />
	<meta name="author" content="kathy mctavish">
	<!-- from ::: http://www.favicon-generator.org/ -->
	<link rel="apple-touch-icon" sizes="57x57" href="../apple-icon-57x57.png">
	<link rel="apple-touch-icon" sizes="60x60" href="../apple-icon-60x60.png">
	<link rel="apple-touch-icon" sizes="72x72" href="../apple-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="76x76" href="../apple-icon-76x76.png">
	<link rel="apple-touch-icon" sizes="114x114" href="../apple-icon-114x114.png">
	<link rel="apple-touch-icon" sizes="120x120" href="../apple-icon-120x120.png">
	<link rel="apple-touch-icon" sizes="144x144" href="../apple-icon-144x144.png">
	<link rel="apple-touch-icon" sizes="152x152" href="../apple-icon-152x152.png">
	<link rel="apple-touch-icon" sizes="180x180" href="../apple-icon-180x180.png">
	<link rel="icon" type="image/png" sizes="192x192"  href="../android-icon-192x192.png">
	<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
	<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
	<link rel="manifest" href="../manifest.json">
	<meta name="msapplication-TileColor" content="#ffffff">
	<meta name="msapplication-TileImage" content="../ms-icon-144x144.png">
	<meta name="theme-color" content="#ffffff">

	<!-- JSON-LD : Google ::: https://developers.google.com/search/docs/guides/intro-structured-data -->
	<script type="application/ld+json">
		{
			"@context": "http://schema.org",
			"@type": "WebPage",
			"name": "sketch 4",
			"breadcrumb": "mctavish.io > lattice > sketch 4",
          		"url": "http://www.mctavish.io/lattice/sketch4.html",
			"description": "lattice ::: sketch 4",
			"datePublished": "2021-01-18",
          		"image": "https://www.mctavish.io/mctavishIcon-01-04-01-01-01.png",
			"author": "http://mctavish.io",
			"license": "http://creativecommons.org/licenses/by-nc-sa/3.0/us/deed.en_US"
		}
	</script>
	<link rel="stylesheet" href="../css/lattice.css"/>
	
</head>
<body id="top" >

<div id="svgframe" class="frame zlow">
	<svg xmlns="http://www.w3.org/2000/svg" id="svg" class="frame" ></svg>
</div>
<div id="wordframe" class="frame z0"></div>
<div id="subtextframe" class="frame z0"></div>
<div id="contentframe" class="absolute zhighest" style="opacity:0">
<div id="mainflex">
<main id="main" class="expand" data-state="expanded">	
<header>
	<h1>sketch 4</h1>
	<h2>lattice</h2>
</header>
<!-- <ul data-role="narrator" class="info compress">
	<li class="title typewriter" title="telegraph" id="telegraph"></li>
	<li class="title  typewriter" title="clock" id="clock">here | now</li>
</ul> -->
<ul data-role="narrator" class="info expand">
	<li><a href="#" id="soundlink" class="corelink">turn on sound</a></li>
	<li><a href="index.html" id="homelink" class="corelink">return home</a></li>
</ul>
<article class="poem" >
	<section>
		<h5>red black white</h5>
		<ul data-role="rider" class="stanza">
			<!-- red -->
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice1_7x5postcard_1609716473039_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice10_7x5postcard_1609637309634_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice6_postcard_1609552427272_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice4_postcard_1609554318535_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice5_postcard_1609555530001_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice7_postcard_1609304545758_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice12_7x5postcard_1609725137193_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice3_postcard_1609553521783_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice12_7x5postcard_1609726307688_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice13_7x5postcard_1609725270705_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice13_7x5postcard_1609725659848_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice14_7x5postcard_1609728391558_output.pdf"> -> view pdf <-- </a></li>
		</ul>
		<h5>blue black white</h5>
		<ol data-role="rider" class="stanza">
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/blueatlaspostcards20201222_bell.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice1_7x5postcard_1609701498576_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice12_7x5postcard_1609726401596_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice13_7x5postcard_1609726050523_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice2_7x5postcard_1609701461511_output.pdf"> -> view pdf <-- </a></li>
		</ol>
		<h5>yellow black white</h5>
		<ol data-role="rider" class="stanza">
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice1_7x5postcard_1609716530994_output.pdf"> -> view pdf <-- </a></li>
		</ol>
		<h5>black white</h5>
		<ol data-role="rider" class="stanza">
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice1_7x5postcard_1609701524938_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice13_7x5postcard_1609725378762_output.pdf"> -> view pdf <-- </a></li>
		</ol>
		<h5>black white</h5>
		<ol data-role="rider" class="stanza">
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice1_7x5postcard_1609701524938_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice13_7x5postcard_1609725378762_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice12_7x5postcard_1609726513422_output.pdf"> -> view pdf <-- </a></li>
		</ol>
		<h5>red yellow black white</h5>
		<ol data-role="rider" class="stanza">
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice8_postcard_1609559475213_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice9_7x5postcard_1609564016856_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice9_7x5postcard_1609564836867_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice13_7x5postcard_1609726157915_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice8_7x5postcard_1609560952356_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice8_7x5postcard_1609561364587_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice8_7x5postcard_1609561512051_output.pdf"> -> view pdf <-- </a></li>
		
		</ol>
	</section>

	there is a hole in the middle ... a bowless string a breathless reed a bony piano harp naked keys
</article>
<article class="poem" >
	<header>
	<h1><a href="#top">^</a></h1>
	</header>
	<section>
		<ul data-role="rider" class="stanza">
			<li>. </li>
			<li>. . .</li>
			<li>. . . .</li>
			<li>. . . . .</li>
			<li>. . . . . .</li>
			<li>. . . . . . .</li>
			<li>. . . . . .</li>
			<li>. . . . .</li>
			<li>. . . .</li>
			<li>. . .</li>
			<li>.</li>
		</ul>
	</section>
</article>
</main>
<audio id="audio1" src="https://storage.googleapis.com/www.blueboatfilms.com/sound/IVdfd.mp3" type="audio/mpeg">Your browser does not support the audio tag.</audio>

</div>
</div>

</body>
<script src="../code/velocity.min.js"></script>
<script src="../code/kefir201911.min.js"></script>
<script src="../code/blueatlas.js"></script>
<script>
let z = getz();
z.radio.start(z);

//set controls
( () => {
	const soundlink = document.querySelector("#soundlink");
	// let telegraph = document.querySelector("#telegraph");
	const audio1 = document.querySelector("#audio1");
	// audio1.src = "https://storage.googleapis.com/www.blueboatfilms.com/sound/IIIaIIfIcsharp.mp3";
	audio1.volume=0.3;
	let trackj=0;
	// const tracks = ["IIIaIIfIcsharp", "IIIaIIfIcsharp3", "IIIdfd2", "IIIdfd3"];
	// const tracks = ["IIIdfd2", "IIIdfd3", "IIIgharmonicandopen", "IIbflata", "IIca", "IIca2", "IIca3_sharpattack", "IIcd", "IIdbflatharmonic", "IIdfsharpharmonic", "IIdglissando2", "IVcopenandharmonics", "IIIgharmonicandopen", "IIdmidharmonic", "IIdopen", "IIdopen2", "IIdopen3", "IVcd", "IVdfd", "IVdfd2", "IVdharmonic", "IVdrrumble", "Iaglissando", "Iaglissando2", "Iaopen", "Ibflata", "IeIIca", "IeIIca_short", "IeIIca_short", "Ifd", "Ifd2"];
	// const tracks = ["geese20201220_1d", "gates20171016_mixdown", "elevator_6815_100percent"];
	const tracks = ["gates20171012_mixdown", "gates20171016_mixdown", "elevator_6815_100percent", "road20140831_1_pingpongdepot", "lowRoadLong"];
	const elements = [0,1].reduce( (acc, j) => {
		let el = z.tools.createElement({
			parentel: z.elements["body"].el, tag: "audio",
			attributes: [
				["id", "audio"+j], ["type", "audio/mpeg"], ["src", "https://storage.googleapis.com/www.blueboatfilms.com/sound/IIca"]
			]
		});
		acc[j] = { el: el };
	return acc;
	}, []);
	elements.forEach(element => {
		z.radio.playtracks({tracks: tracks, order:"random", audioel:element.el, volume:0.1 });
	});
	Kefir.fromEvents(soundlink, "click").onValue( e => {
		z.tools.logmsg("play sound !");
		if(!z.radio.soundplaying) { 
			try {
				z.radio.player.context.resume().then(() => {
					z.tools.logmsg("playback resumed");
					// telegraph.innerHTML =  "(sound on)";
					z.radio.soundplaying = true;
					// soundlink.classList.add("active");
					elements.forEach(element => {
						element.el.play();
					});
					soundlink.innerText = "turn off sound";
				});
			} catch(e) { z.tools.logerror("dashboard ::: resumeaudio " + e) } 
		}
		else { 
			try {
				z.radio.player.context.suspend().then(() => {
					// telegraph.innerHTML =  "(sound off)";
					z.radio.soundplaying = false;
					// soundlink.classList.remove("active");
					elements.forEach(element => {
						element.el.pause();
					});
					soundlink.innerText = "turn on sound";
				});
			} catch(e) { z.tools.logerror("dashboard ::: suspendaudio " + e) }
		}
	});
})();

//playsound
(() =>  {
	const defaultduration = (dt,n,graintdt,clip) => dt/(graindt*2);
	const defaultfadetime = (dt,n,graintdt,clip) => dt/(graindt*20);
	const defaultpart = (dt=4000, n=4, graindt=400, chance=0.8, duration=defaultduration, fadetime=defaultfadetime, instruments=["celloknockcanyon"]) => { return {dt:dt, chance:chance, graindt: graindt, n: 5, duration: duration(dt,n,graintdt), fadetime: fadetime(dt,n,graintdt), instruments: ["celloknockcanyon"] } };
	const score = [
		// ((dt=51000, n=4, graindt=1200, chance=0.8) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: 1800, fadetime: 200, instruments: ["bagpipe1high", "bagpipegeese"] } })(),
		// ((dt=51000, n=5, graindt=900, chance=0.8) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: 1000, fadetime: 200, instruments: ["bagpipegeese", "bagpipe1"] } })(),		// ((dt=51000, n=4, graindt=1200, chance=0.8) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: 1800, fadetime: 200, instruments: ["bagpipe1high", "bagpipegeese"] } })(),
		((dt=51000, n=5, graindt=900, chance=0.8) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: 1000, fadetime: 200, instruments: ["bell11","bell2", "bell6", "longbell"] } })(),
		((dt=51000, n=3, graindt=1100, chance=0.8) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: 1300, fadetime: 300, instruments: ["bell11","bell2"] } })(),
		((dt=91000, n=5, graindt=500, chance=0.6) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: dt/(graindt*2), fadetime: dt/(graindt*20), instruments: ["submarineecho1", "submarineecho2"] } })(),
		((dt=91000, n=5, graindt=900, chance=0.6) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: dt/(graindt*2), fadetime: dt/(graindt*20), instruments: ["submarineecho1"] } })(),
	];
	z.radio.load(z.tools.flatten(score.map(part => part.instruments)));
	score.forEach( (part,j) => {
		z.streams["clock"].filter( e => e.t%Math.floor(part.dt/1000)===0 && z.tools.randominteger(0,10)<part.chance*10 && z.radio.soundplaying)
			.onValue( e=> {
				let clip = part.instruments[z.tools.randominteger(0,part.instruments.length)];
				Kefir.sequentially(part.graindt, [...Array(part.n).keys()]).onValue( x => { 
					z.radio.playbuffer({duration:part.duration, fadetime:part.fadetime, instrumentname:clip, volume: z.tools.randominteger(z.data.sound.instruments[clip].minvolume*10, z.data.sound.instruments[clip].maxvolume*10)/20});
				});
			})
	});
})();


//draw
( () => {

	z.streams["draw"] = Kefir.combine([z.streams["clock"]], [z.streams["dimensions"]], (clock, dimensions) => { return {clock:clock, dimensions:dimensions} })
		.scan( (state, e) => { 
			state.clock = e.clock;
			state.dimensions = e.dimensions;
			state.count = state.count + 1;
			return state;
		}, {clock:{t:0}, dt:1}  );

	//lines
	( dt => {
		let nshapes = [1,1][z.dimensions.v];
		let width = window.innerWidth, height = window.innerHeight;
		let colors = [[z.data.colors.pigments.red,1]].reduce( (acc, color, j) => {
			Array.prototype.push.apply(acc,[...Array(color[1]).keys()].reduce( (acc2,k) => { acc2.push(color[0]); return acc2 },[]) );
			return acc;
		}, []);
		const elements = [...Array(nshapes).keys()].reduce( (acc, j) => {
			let el = z.tools.createElement({
				parentel: z.elements["svg"].el, tag: "line",
				ns: "http://www.w3.org/2000/svg",
				attributes: [
					["stroke-width", width], ["stroke-opacity", 0.01], ["stroke", colors[j%colors.length]],
					["x1", width/2], ["x2", width/2], ["y1", 0], ["y2", height]
				],
				cssclasses: ["shape", "line"]
			});
			acc[j] = { el: el };
		return acc;
		}, []);
		const drawings = [
			e => {
				try {
					let count = e.clock.t/dt;
					let width = e.dimensions.width, height = e.dimensions.height;
					let y1 = [0, e.dimensions.height, e.dimensions.height/2, 0][count%4];
					let y2 = [e.dimensions.height, 0, e.dimensions.height/2, 0][count%4];
					Velocity({	
						elements: elements[count%nshapes].el,
						properties: { strokeOpacity: 1.0, strokeWidth: e.dimensions.width, strokeDasharray: z.tools.randominteger(e.dimensions.min/8, e.dimensions.min/2), x1: e.dimensions.width/2, x2: e.dimensions.width/2, y1: y1, y2: y2 },
						options: { duration: z.tools.randominteger(1000*dt*nshapes/2,1000*dt*nshapes), delay: 0 },
					});
				} catch(err) { z.tools.logerror("line animation 1 ::: " + err ) }
			}
		];
		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			drawings[0](e);
		})
	})(6);

	//lines 2
	( dt => {
		let nshapes = [2,4][z.dimensions.v];
		let width = window.innerWidth, height = window.innerHeight;
		const elements = [...Array(nshapes).keys()].reduce( (acc, j) => {
			let el = z.tools.createElement({
				parentel: z.elements["svg"].el, tag: "line",
				ns: "http://www.w3.org/2000/svg",
				attributes: [
					["stroke-width", height], ["stroke-opacity", 0.01],
					["x1", 0], ["x2", width], ["y1", height/2], ["y2", height/2]
				],
				cssclasses: ["shape", "line"]
			});
			acc[j] = { el: el };
		return acc;
		}, []);
		let colors = [[z.data.colors.pigments.black,4], [z.data.colors.pigments.white,4], [z.data.colors.pigments.blue,0], [z.data.colors.pigments.yellow,0], [z.data.colors.pigments.red,0]].reduce( (acc, color, j) => {
			Array.prototype.push.apply(acc,[...Array(color[1]).keys()].reduce( (acc2,k) => { acc2.push(color[0]); return acc2 },[]) );
			return acc;
		}, []);
		const drawings = [
			e => {
				try {
					let count = e.clock.t/dt;
					let width = e.dimensions.width, height = e.dimensions.height;
					let color = colors[z.tools.randominteger(0, colors.length)];
					let x1 = [0, e.dimensions.width, e.dimensions.width, 0][count%4];
					let x2 = [e.dimensions.width, 0, e.dimensions.width, 0][count%4];
					Velocity({	
						elements: elements[count%nshapes].el,
						properties: { strokeOpacity: 1.0, stroke: color, strokeWidth: e.dimensions.height, strokeDasharray: z.tools.randominteger(e.dimensions.min/8, e.dimensions.min/2), x1: x1, x2: x2, y1: e.dimensions.height/2, y2: e.dimensions.height/2 },
						options: { duration: z.tools.randominteger(1000*dt*nshapes/2,1000*dt*nshapes), delay: 0 },
					});
				} catch(err) { z.tools.logerror("line animation 2 ::: " + err ) }
			}
		];
		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			drawings[0](e);
		})
	})(2);

	//lines
	( dt => {
		let nshapes = [2,4][z.dimensions.v];
		let width = window.innerWidth, height = window.innerHeight;
		let colors = [[z.data.colors.pigments.white,1], [z.data.colors.pigments.black,1]].reduce( (acc, color, j) => {
			Array.prototype.push.apply(acc,[...Array(color[1]).keys()].reduce( (acc2,k) => { acc2.push(color[0]); return acc2 },[]) );
			return acc;
		}, []);
		const elements = [...Array(nshapes).keys()].reduce( (acc, j) => {
			let el = z.tools.createElement({
				parentel: z.elements["svg"].el, tag: "line",
				ns: "http://www.w3.org/2000/svg",
				attributes: [
					["stroke-width", width], ["stroke-opacity", 0.01], ["stroke", colors[j%colors.length]],
					["x1", width/2], ["x2", width/2], ["y1", 0], ["y2", height]
				],
				cssclasses: ["shape", "line"]
			});
			acc[j] = { el: el };
		return acc;
		}, []);
		const drawings = [
			e => {
				try {
					let count = e.clock.t/dt;
					let width = e.dimensions.width, height = e.dimensions.height;
					let y1 = [0, e.dimensions.height, e.dimensions.height, 0][count%4];
					let y2 = [e.dimensions.height, 0, e.dimensions.height, 0][count%4];
					Velocity({	
						elements: elements[count%nshapes].el,
						properties: { strokeOpacity: 1.0, strokeWidth: e.dimensions.width, strokeDasharray: z.tools.randominteger(e.dimensions.min/8, e.dimensions.min/2), x1: e.dimensions.width/2, x2: e.dimensions.width/2, y1: y1, y2: y2 },
						options: { duration: z.tools.randominteger(1000*dt*nshapes/2,1000*dt*nshapes), delay: 0 },
					});
				} catch(err) { z.tools.logerror("line animation 1 ::: " + err ) }
			}
		];
		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			drawings[0](e);
		})
	})(5);
	//circles 1
	( dt => {
		let nshapes = [2,2][z.dimensions.v];
		let width = window.innerWidth, height = window.innerHeight;
		let colors = [[z.data.colors.pigments.black,1], [z.data.colors.pigments.white,1]].reduce( (acc, color, j) => {
			Array.prototype.push.apply(acc,[...Array(color[1]).keys()].reduce( (acc2,k) => { acc2.push(color[0]); return acc2 },[]) );
			return acc;
		}, []);
		const elements = [...Array(nshapes).keys()].reduce( (acc, j) => {
			let el = z.tools.createElement({
				parentel: z.elements["svg"].el, tag: "circle",
				ns: "http://www.w3.org/2000/svg",
				attributes: [ ["cx", width/2], ["cy", height/2], ["stroke", colors[j%colors.length]], ["fill", colors[j%colors.length]] ],
				cssclasses: ["shape", "circle"]
			});
			acc[j] = { el: el };
		return acc;
		}, []);
		const drawings = [
			e => {
				try {
					let count = e.clock.t/dt;
					let r = z.tools.randominteger(e.dimensions.min/2, e.dimensions.min);
					Velocity({	
						elements: elements[count%nshapes].el,
						properties: { fillOpacity: count%2===0 ? 1.0 : 1.0, strokeOpacity: count%2===0 ? 0.0: 0.0, strokeWidth: r/2, strokeDasharray: z.tools.randominteger(r/6, r), cx: e.dimensions.width/2, cy: e.dimensions.height/2, r: r },
						options: { duration: z.tools.randominteger(1000*dt*nshapes/2,1000*dt*nshapes), delay: 0 },
					});
				} catch(err) { z.tools.logerror("circle animation 1 ::: " + err ) }
			},
			
		];
		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			drawings[0](e);
		})
	})(3);
	//lines 2
	( dt => {
		let nshapes = [1,2][z.dimensions.v];
		let width = window.innerWidth, height = window.innerHeight;
		const elements = [...Array(nshapes).keys()].reduce( (acc, j) => {
			// z.tools.logmsg("create line element ::: " + j);
			let el = z.tools.createElement({
				parentel: z.elements["svg"].el, tag: "line",
				ns: "http://www.w3.org/2000/svg",
				attributes: [
					["stroke-width", width], ["stroke-opacity", 0.01],
					["x1", 0], ["x2", width], ["y1", height/2], ["y2", height/2]
				],
				cssclasses: ["shape", "line"]
			});
			acc[j] = { el: el };
		return acc;
		}, []);
		let colors = [[z.data.colors.pigments.black,4], [z.data.colors.pigments.white,6], [z.data.colors.pigments.blue,0], [z.data.colors.pigments.yellow,0], [z.data.colors.pigments.red,0]].reduce( (acc, color, j) => {
			Array.prototype.push.apply(acc,[...Array(color[1]).keys()].reduce( (acc2,k) => { acc2.push(color[0]); return acc2 },[]) );
			return acc;
		}, []);
		const drawings = [
			e => {
				try {
					let count = e.clock.t/dt;
					let width = e.dimensions.width, height = e.dimensions.height;
					let color = colors[z.tools.randominteger(0, colors.length)];
					let x1 = [0, e.dimensions.width, e.dimensions.width, 0][count%4];
					let x2 = [e.dimensions.width, 0, e.dimensions.width, 0][count%4];
					Velocity({	
						elements: elements[count%nshapes].el,
						properties: { strokeOpacity: 1.0, stroke: color, strokeWidth: e.dimensions.height, strokeDasharray: z.tools.randominteger(e.dimensions.min/8, e.dimensions.min/2), x1: x1, x2: x2, y1: e.dimensions.height/2, y2: e.dimensions.height/2 },
						options: { duration: z.tools.randominteger(1000*dt*nshapes/2,1000*dt*nshapes), delay: 0 },
					});
				} catch(err) { z.tools.logerror("line animation 2 ::: " + err ) }
			}
		];
		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			drawings[0](e);
		})
	})(3);
	//circles 1
	( dt => {
		let nshapes = [2,2][z.dimensions.v];
		let width = window.innerWidth, height = window.innerHeight;
		let colors = [[z.data.colors.pigments.white,1], [z.data.colors.pigments.black,1]].reduce( (acc, color, j) => {
			Array.prototype.push.apply(acc,[...Array(color[1]).keys()].reduce( (acc2,k) => { acc2.push(color[0]); return acc2 },[]) );
			return acc;
		}, []);
		const elements = [...Array(nshapes).keys()].reduce( (acc, j) => {
			let el = z.tools.createElement({
				parentel: z.elements["svg"].el, tag: "circle",
				ns: "http://www.w3.org/2000/svg",
				attributes: [ ["cx", width/2], ["cy", height/2], ["stroke", colors[j%colors.length]], ["fill", colors[j%colors.length]] ],
				cssclasses: ["shape", "circle"]
			});
			acc[j] = { el: el };
		return acc;
		}, []);
		const drawings = [
			e => {
				try {
					let count = e.clock.t/dt;
					let r = z.tools.randominteger(e.dimensions.min/10, e.dimensions.min);
					Velocity({	
						elements: elements[count%nshapes].el,
						properties: { fillOpacity: count%2===0 ? 1.0 : 1.0, strokeOpacity: count%2===0 ? 0.0: 0.0, strokeWidth: r/2, strokeDasharray: z.tools.randominteger(r/6, r), cx: e.dimensions.width/2, cy: e.dimensions.height/2, r: r },
						options: { duration: z.tools.randominteger(1000*dt*nshapes/2,1000*dt*nshapes), delay: 0 },
					});
				} catch(err) { z.tools.logerror("circle animation 1 ::: " + err ) }
			},
			
		];
		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			drawings[0](e);
		})
	})(2);
})();

window.addEventListener('load', e => {
	window.scroll(0,0);
	window.setTimeout(() => { document.querySelector("#contentframe").style.opacity = 1.0 }, 400);
	document.documentElement.style.setProperty("--colorx", "#454545")
});
window.addEventListener('beforeunload', e => {
	window.scroll(0,0);
});
</script>
</html>