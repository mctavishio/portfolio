<!DOCTYPE html>
<html lang="en">
<head>
	<title>lattice sketch 7</title>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<meta name="description" content="mctavish ::: project lattice ::: sketch 7" />
	<meta name="keywords" content="mctavish net.art generative algorithmic code electronic literature" />
	<meta name="author" content="kathy mctavish">
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/manifest.json">
	<script type="application/ld+json">
		{
			"@context": "http://schema.org",
			"@type": "WebPage",
			"name": "sketch 7",
			"breadcrumb": "mctavish.io > lattice > sketch 7",
          		"url": "http://www.mctavish.io/lattice/sketch7.html",
			"description": "lattice ::: sketch 7",
			"datePublished": "2021-01-21",
          		"image": "https://www.mctavish.io/apple-touch-icon.png",
			"author": "http://mctavish.io",
			"license": "http://creativecommons.org/licenses/by-nc-sa/3.0/us/deed.en_US"
		}
	</script>
	<link rel="stylesheet" href="../css/lattice.css"/>
	
</head>
<body id="top" >

<div id="svgframe" class="frame zlow">
	<svg xmlns="http://www.w3.org/2000/svg" id="svg" class="frame" ></svg>
</div>
<div id="wordframe" class="frame z0"></div>
<div id="subtextframe" class="frame z0"></div>
<div id="contentframe" class="absolute zhighest" style="opacity:0">
<div id="mainflex">
<main id="main" class="expand" data-state="expanded">	
<header>
	<h1>sketch 7</h1>
	<h2>lattice</h2>
</header>
<!-- <ul data-role="narrator" class="info compress">
	<li class="title typewriter" title="telegraph" id="telegraph"></li>
	<li class="title  typewriter" title="clock" id="clock">here | now</li>
</ul> -->
<ul data-role="narrator" class="info expand">
	<li><a href="#" id="soundlink" class="corelink">turn on sound</a></li>
	<li><a href="index.html" id="homelink" class="corelink">return home</a></li>
</ul>
<article class="poem" >
	<section>
		<h5>red black white</h5>
		<ul data-role="rider" class="stanza">
			<!-- red -->
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice1_7x5postcard_1609716473039_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice10_7x5postcard_1609637309634_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice6_postcard_1609552427272_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice4_postcard_1609554318535_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice5_postcard_1609555530001_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice7_postcard_1609304545758_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice12_7x5postcard_1609725137193_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice3_postcard_1609553521783_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice12_7x5postcard_1609726307688_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice13_7x5postcard_1609725270705_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice13_7x5postcard_1609725659848_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice14_7x5postcard_1609728391558_output.pdf"> -> view pdf <-- </a></li>
		</ul>
		<h5>blue black white</h5>
		<ol data-role="rider" class="stanza">
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/blueatlaspostcards20201222_bell.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice1_7x5postcard_1609701498576_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice12_7x5postcard_1609726401596_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice13_7x5postcard_1609726050523_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice2_7x5postcard_1609701461511_output.pdf"> -> view pdf <-- </a></li>
		</ol>
		<h5>yellow black white</h5>
		<ol data-role="rider" class="stanza">
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice1_7x5postcard_1609716530994_output.pdf"> -> view pdf <-- </a></li>
		</ol>
		<h5>black white</h5>
		<ol data-role="rider" class="stanza">
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice1_7x5postcard_1609701524938_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice13_7x5postcard_1609725378762_output.pdf"> -> view pdf <-- </a></li>
		</ol>
		<h5>black white</h5>
		<ol data-role="rider" class="stanza">
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice1_7x5postcard_1609701524938_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice13_7x5postcard_1609725378762_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice12_7x5postcard_1609726513422_output.pdf"> -> view pdf <-- </a></li>
		</ol>
		<h5>red yellow black white</h5>
		<ol data-role="rider" class="stanza">
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice8_postcard_1609559475213_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice9_7x5postcard_1609564016856_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice9_7x5postcard_1609564836867_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice13_7x5postcard_1609726157915_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice8_7x5postcard_1609560952356_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice8_7x5postcard_1609561364587_output.pdf"> -> view pdf <-- </a></li>
			<li><a href="https://storage.googleapis.com/www.blueboatfilms.com/stills/7x5postcard/print_lattice8_7x5postcard_1609561512051_output.pdf"> -> view pdf <-- </a></li>
		
		</ol>
	</section>

	there is a hole in the middle ... a bowless string a breathless reed a bony piano harp naked keys
</article>
<article class="poem" >
	<header>
	<h1><a href="#top">^</a></h1>
	</header>
	<section>
		<ul data-role="rider" class="stanza">
			<li>. </li>
			<li>. . .</li>
			<li>. . . .</li>
			<li>. . . . .</li>
			<li>. . . . . .</li>
			<li>. . . . . . .</li>
			<li>. . . . . .</li>
			<li>. . . . .</li>
			<li>. . . .</li>
			<li>. . .</li>
			<li>.</li>
		</ul>
	</section>
</article>
</main>
<audio id="audio1" src="https://storage.googleapis.com/www.blueboatfilms.com/sound/IVdfd.mp3" type="audio/mpeg">Your browser does not support the audio tag.</audio>

</div>
</div>

</body>
<script src="../code/velocity.min.js"></script>
<script src="../code/kefir201911.min.js"></script>
<script src="../code/blueatlas.js"></script>
<script>
let z = getz();
z.radio.start(z);

//set controls
( () => {
	const soundlink = document.querySelector("#soundlink");
	// let telegraph = document.querySelector("#telegraph");
	const audio1 = document.querySelector("#audio1");
	// audio1.src = "https://storage.googleapis.com/www.blueboatfilms.com/sound/IIIaIIfIcsharp.mp3";
	audio1.volume=0.3;
	let trackj=0;
	// const tracks = ["IIIaIIfIcsharp", "IIIaIIfIcsharp3", "IIIdfd2", "IIIdfd3"];
	// const tracks = ["IIIdfd2", "IIIdfd3", "IIIgharmonicandopen", "IIbflata", "IIca", "IIca2", "IIca3_sharpattack", "IIcd", "IIdbflatharmonic", "IIdfsharpharmonic", "IIdglissando2", "IVcopenandharmonics", "IIIgharmonicandopen", "IIdmidharmonic", "IIdopen", "IIdopen2", "IIdopen3", "IVcd", "IVdfd", "IVdfd2", "IVdharmonic", "IVdrrumble", "Iaglissando", "Iaglissando2", "Iaopen", "Ibflata", "IeIIca", "IeIIca_short", "IeIIca_short", "Ifd", "Ifd2"];
	// const tracks = ["geese20201220_1d", "gates20171016_mixdown", "elevator_6815_100percent"];
	// const tracks = [ "pitchclasses_1_g_cistern", "pitchclasses_1_d_cistern", "pitchclasses_1_c_cistern", "pitchclasses_1_g_cistern", "pitchclasses_1_a_cistern", "pitchclasses_1_d_cistern"];
	// const tracks = ["therider0b", "therider0", "clarinetall", "vox20200118_8_3b_mixdown", "trappedbird"];
	// const tracks = ["therider0", "numberstation0b", "therider0b"];
	// const tracks = ["vox20200118_8_3b_mixdown"];
	// const tracks = ["coffepot1eminor", "coffepot1"];
	// const tracks = ["clarinetjazz0b"];
	// const tracks = ["piano2b", "piano2", "piano3b"];
	// const tracks = ["typewriterlong", "piano2","typewriterlong", "piano2","typewriterlong", "piano2", "geese20201220_1d"];
	// const tracks = ["uniondepotcistern", "trainlong1", "trainlong2"];

	const tracks = ["bowedvibe0", "bowedcymbol0", "clarinetnotes", "clarinetnotes", "clarinetall", "clarinetnotes", "clarinetall"];

	const elements = [0,1,2].reduce( (acc, j) => {
		let el = z.tools.createElement({
			parentel: z.elements["body"].el, tag: "audio",
			attributes: [
				["id", "audio"+j], ["type", "audio/mpeg"], ["src", "https://storage.googleapis.com/www.blueboatfilms.com/sound/IIca"]
			]
		});
		acc[j] = { el: el };
	return acc;
	}, []);


	const playtrack = (el, track) => {
		let duration = z.tools.randominteger(4, z.data.sound.tracks[track].duration);
		// let duration = z.tools.randominteger(4, 20);
		let start = z.tools.randominteger(0,z.data.sound.tracks[track].duration-duration);
		let dt = Math.floor(Math.min(2, duration/4));
		
		el.currentTime=start;
		el.setAttribute("start", start);
		el.setAttribute("end", start+duration);
		el.setAttribute("dt", dt); el.setAttribute("volume", 0.3);

		el.src = z.data.sound.basetrackurl + z.data.sound.tracks[track].url; 
		el.volume=0;
		el.currentTime=start; 
		// el.playbackRate = z.tools.randominteger(100,160)/100;
		z.tools.logmsg("in playtrack track = " + track + " duration = " + duration + " dt = " + dt + " start = " + start);
		if(z.radio.soundplaying) {
			let playPromise = el.play();
			playPromise.then( () => {
				z.tools.logmsg("now playing " + el.src);
			})
			.catch(error => {
				// Auto-play was prevented
				// Show paused UI.
			});
		}
	};
	const monitor = e => {
		let el = e.target;
		let t = el.currentTime, end = Number(el.getAttribute("end")), start = Number(el.getAttribute("start")), dt = Number(el.getAttribute("dt"));
		let v = el.volume, goalv = Number(el.getAttribute("volume"));
		// z.tools.logmsg("in monitor : id = " + el.getAttribute("id") + " t = " + t + " volume = " + v +  " start = " + start + " end = " + end  + " dt = " + dt);
		if( t >= end) {
			el.pause();
			playtracks(el);
		}
		else if( t < start + dt ) {
			let x = start+dt;
			// z.tools.logmsg("** in monitor = t = " + t + " start + dt = " + x);
			el.volume = goalv/dt * (t - start);
		}
		else if(t > end - dt) {
			// z.tools.logmsg("## in monitor = t = " + t + "goalv/dt * (end - t) = " + (goalv/dt * (end - t)) + " end = " + end);
			el.volume = goalv/dt * (end - t);
		}
	};
	const playtracks = el => {
		let track = tracks[z.tools.randominteger(0, tracks.length)];
		z.tools.logmsg("** -> in playtracks track = " + track);
		playtrack(el, track);
	};
	elements.forEach( element => {
		// z.radio.playtracks({tracks: tracks, order:"random", audioel:element.el, volume:0.2 });
		let track = tracks[z.tools.randominteger(0, tracks.length)];
		playtrack(element.el, track);
		element.el.addEventListener("timeupdate", (e) => {
			monitor(e);
		});
	});
	Kefir.fromEvents(soundlink, "click").onValue( e => {
		z.tools.logmsg("play sound !");
		if(!z.radio.soundplaying) { 
			try {
				z.radio.player.context.resume().then(() => {
					z.tools.logmsg("playback resumed");
					// telegraph.innerHTML =  "(sound on)";
					z.radio.soundplaying = true;
					// soundlink.classList.add("active");
					elements.forEach(element => {
						element.el.play();
					});
					soundlink.innerText = "turn off sound";
				});
			} catch(e) { z.tools.logerror("dashboard ::: resumeaudio " + e) } 
		}
		else { 
			try {
				z.radio.player.context.suspend().then(() => {
					// telegraph.innerHTML =  "(sound off)";
					z.radio.soundplaying = false;
					// soundlink.classList.remove("active");
					elements.forEach(element => {
						element.el.pause();
					});
					soundlink.innerText = "turn on sound";
				});
			} catch(e) { z.tools.logerror("dashboard ::: suspendaudio " + e) }
		}
	});
})();

//playsound
(() =>  {
	const defaultduration = (dt,n,graintdt,clip) => dt/(graindt*2);
	const defaultfadetime = (dt,n,graintdt,clip) => dt/(graindt*20);
	const defaultpart = (dt=4000, n=4, graindt=400, chance=0.8, duration=defaultduration, fadetime=defaultfadetime, instruments=["celloknockcanyon"]) => { return {dt:dt, chance:chance, graindt: graindt, n: 5, duration: duration(dt,n,graintdt), fadetime: fadetime(dt,n,graintdt), instruments: ["celloknockcanyon"] } };
	const score = [
		// ((dt=251000, n=4, graindt=800, duration=3, chance=0.8, volume=0.3) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: duration, fadetime: duration*.1, volume:volume, instruments: ["bagpipe1high", "bagpipegeese"] } })(),
		// ((dt=251000, n=5, graindt=600, duration=2, chance=0.8, volume=0.3) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration, fadetime: duration*.1, volume:volume, instruments: ["bagpipe1high", "bagpipegeese"] } })(),
		// ((dt=118000, n=2, graindt=600, duration=4, chance=0.8, volume=0.6) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: duration, fadetime: duration*.1, volume:volume, instruments: ["lookingforyou0"] } })(),
		// ((dt=119000, n=1, graindt=900, duration=5, chance=0.8, volume=0.6) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: duration, fadetime: duration*.1, volume:volume, instruments: ["lookingforyou0"] } })(),
		// ((dt=51000, n=8, graindt=480, duration=10, chance=0.9, volume=0.6) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: duration, fadetime: duration*.1, volume:volume, instruments: ["mags1harmonic", "magsII_a","magsIII_a","magsIV_b","magsV_b","magsIV_b","magsV_b","magsIV_b","magsV_b", "magsV_b", "magsV_b","magsvii_b"] } })(),
		// ((dt=51000, n=6, graindt=680, duration=8, chance=0.9, volume=0.6) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: duration, fadetime: duration*.1, volume:volume, instruments: ["magsII_a","magsIII_a","magsIV_b","magsV_b","magsIV_b","magsV_b","magsIV_b","magsV_b","magsV_b", "magsV_b","magsvii_b"] } })(),
		// ((dt=51000, n=3, graindt=1080, duration=10, chance=0.9, volume=0.6) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: duration, fadetime: duration*.1, volume:volume, instruments: ["magsII_a","magsIII_a","magsIV_b","magsV_b","magsIV_b","magsV_b","magsIV_b","magsV_b","magsV_b", "magsV_b","magsvii_b"] } })(),
		((dt=111000, n=3, graindt=1100, duration=10, chance=0.8, volume=0.3) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: duration, fadetime: duration*.2, volume:volume, instruments: ["voxmct0b"] } })(),
		((dt=111000, n=4, graindt=900, duration=10, chance=0.8, volume=0.3) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: duration, fadetime: duration*.2, volume:volume, instruments: ["voxmct0b"] } })(),
		((dt=71000, n=2, graindt=600, duration=4, chance=0.8, volume=0.6) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: duration, fadetime: duration*.1, volume:volume, instruments: ["lookingforyou0"] } })(),
		((dt=71000, n=1, graindt=900, duration=5, chance=0.8, volume=0.6) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: duration, fadetime: duration*.1, volume:volume, instruments: ["lookingforyou0"] } })(),
		((dt=91000, n=4, graindt=900, duration=5, chance=0.8, volume=0.4) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: duration, fadetime: duration*.1, volume:volume, instruments: ["vox20200124_itwas"] } })(),
		((dt=51000, n=2, graindt=800, duration=8, chance=0.8, volume=0.6) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: duration, fadetime: duration*.1, volume:volume, instruments: ["lookingforyou0"] } })(),
		((dt=52000, n=1, graindt=900, duration=5, chance=0.8, volume=0.6) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: duration, fadetime: duration*.1, volume:volume, instruments: ["lookingforyou0"] } })(),
		((dt=101000, n=4, graindt=900, duration=5, chance=0.8, volume=0.4) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: duration, fadetime: duration*.1, volume:volume, instruments: ["vox20200124_itwas"] } })(),
		((dt=81000, n=4, graindt=900, duration=5, chance=0.8, volume=0.4) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: duration, fadetime: duration*.1, volume:volume, instruments: ["vox20200124_itwas"] } })(),
		((dt=81000, n=3, graindt=400, duration=12, chance=0.8, volume=0.4) => { return {dt:dt, chance:chance, graindt: graindt, n: n, duration: duration, fadetime: duration*.1, volume:volume, instruments: ["birdcry"] } })(),
	];
	z.radio.load(z.tools.flatten(score.map(part => part.instruments)));
	score.forEach( (part,j) => {
		z.streams["clock"].filter( e => e.t%Math.floor(part.dt/1000)===0 && z.tools.randominteger(0,10)<part.chance*10 && z.radio.soundplaying)
			.onValue( e=> {
				let clip = part.instruments[z.tools.randominteger(0,part.instruments.length)];
				Kefir.sequentially(part.graindt, [...Array(part.n).keys()]).onValue( x => { 
					// z.radio.playbuffer({duration:part.duration, fadetime:part.fadetime, instrumentname:clip, volume: z.tools.randominteger(z.data.sound.instruments[clip].minvolume*10, z.data.sound.instruments[clip].maxvolume*10)/20});
					z.tools.logmsg("-- " + clip)
					z.radio.playbuffer({duration:part.duration, fadetime:part.fadetime, instrumentname:clip, volume: z.tools.randominteger(z.data.sound.instruments[clip].minvolume*10, z.data.sound.instruments[clip].maxvolume*10)*part.volume/10});
				});
			})
	});
})();


//draw
( () => {

	z.streams["draw"] = Kefir.combine([z.streams["clock"]], [z.streams["dimensions"]], (clock, dimensions) => { return {clock:clock, dimensions:dimensions} })
		.scan( (state, e) => { 
			state.clock = e.clock;
			state.dimensions = e.dimensions;
			state.count = state.count + 1;
			return state;
		}, {clock:{t:0}, dt:1}  );

	//lines
	( dt => {
		let nshapes = [1,1][z.dimensions.v];
		let width = window.innerWidth, height = window.innerHeight;
		let colors = [[z.data.colors.pigments.red,1]].reduce( (acc, color, j) => {
			Array.prototype.push.apply(acc,[...Array(color[1]).keys()].reduce( (acc2,k) => { acc2.push(color[0]); return acc2 },[]) );
			return acc;
		}, []);
		const elements = [...Array(nshapes).keys()].reduce( (acc, j) => {
			let el = z.tools.createElement({
				parentel: z.elements["svg"].el, tag: "line",
				ns: "http://www.w3.org/2000/svg",
				attributes: [
					["stroke-width", width], ["stroke-opacity", 0.01], ["stroke", colors[j%colors.length]],
					["x1", width/2], ["x2", width/2], ["y1", 0], ["y2", height]
				],
				cssclasses: ["shape", "line"]
			});
			acc[j] = { el: el };
		return acc;
		}, []);
		const drawings = [
			e => {
				try {
					let count = e.clock.t/dt;
					let width = e.dimensions.width, height = e.dimensions.height;
					let y1 = [0, e.dimensions.height, e.dimensions.height/2, 0][count%4];
					let y2 = [e.dimensions.height, 0, e.dimensions.height/2, 0][count%4];
					Velocity({	
						elements: elements[count%nshapes].el,
						properties: { strokeOpacity: 1.0, strokeWidth: e.dimensions.width, strokeDasharray: z.tools.randominteger(e.dimensions.min/8, e.dimensions.min/2), x1: e.dimensions.width/2, x2: e.dimensions.width/2, y1: y1, y2: y2 },
						options: { duration: z.tools.randominteger(1000*dt*nshapes/2,1000*dt*nshapes), delay: 0 },
					});
				} catch(err) { z.tools.logerror("line animation 1 ::: " + err ) }
			}
		];
		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			drawings[0](e);
		})
	})(6);

	//lines 2
	( dt => {
		let nshapes = [2,4][z.dimensions.v];
		let width = window.innerWidth, height = window.innerHeight;
		const elements = [...Array(nshapes).keys()].reduce( (acc, j) => {
			let el = z.tools.createElement({
				parentel: z.elements["svg"].el, tag: "line",
				ns: "http://www.w3.org/2000/svg",
				attributes: [
					["stroke-width", height], ["stroke-opacity", 0.01],
					["x1", 0], ["x2", width], ["y1", height/2], ["y2", height/2]
				],
				cssclasses: ["shape", "line"]
			});
			acc[j] = { el: el };
		return acc;
		}, []);
		let colors = [[z.data.colors.pigments.black,4], [z.data.colors.pigments.white,4], [z.data.colors.pigments.blue,0], [z.data.colors.pigments.yellow,0], [z.data.colors.pigments.red,0]].reduce( (acc, color, j) => {
			Array.prototype.push.apply(acc,[...Array(color[1]).keys()].reduce( (acc2,k) => { acc2.push(color[0]); return acc2 },[]) );
			return acc;
		}, []);
		const drawings = [
			e => {
				try {
					let count = e.clock.t/dt;
					let width = e.dimensions.width, height = e.dimensions.height;
					let color = colors[z.tools.randominteger(0, colors.length)];
					let x1 = [0, e.dimensions.width, e.dimensions.width, 0][count%4];
					let x2 = [e.dimensions.width, 0, e.dimensions.width, 0][count%4];
					Velocity({	
						elements: elements[count%nshapes].el,
						properties: { strokeOpacity: 1.0, stroke: color, strokeWidth: e.dimensions.height, strokeDasharray: z.tools.randominteger(e.dimensions.min/8, e.dimensions.min/2), x1: x1, x2: x2, y1: e.dimensions.height/2, y2: e.dimensions.height/2 },
						options: { duration: z.tools.randominteger(1000*dt*nshapes/2,1000*dt*nshapes), delay: 0 },
					});
				} catch(err) { z.tools.logerror("line animation 2 ::: " + err ) }
			}
		];
		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			drawings[0](e);
		})
	})(2);

	//lines
	( dt => {
		let nshapes = [2,4][z.dimensions.v];
		let width = window.innerWidth, height = window.innerHeight;
		let colors = [[z.data.colors.pigments.white,1], [z.data.colors.pigments.black,1]].reduce( (acc, color, j) => {
			Array.prototype.push.apply(acc,[...Array(color[1]).keys()].reduce( (acc2,k) => { acc2.push(color[0]); return acc2 },[]) );
			return acc;
		}, []);
		const elements = [...Array(nshapes).keys()].reduce( (acc, j) => {
			let el = z.tools.createElement({
				parentel: z.elements["svg"].el, tag: "line",
				ns: "http://www.w3.org/2000/svg",
				attributes: [
					["stroke-width", width], ["stroke-opacity", 0.01], ["stroke", colors[j%colors.length]],
					["x1", width/2], ["x2", width/2], ["y1", 0], ["y2", height]
				],
				cssclasses: ["shape", "line"]
			});
			acc[j] = { el: el };
		return acc;
		}, []);
		const drawings = [
			e => {
				try {
					let count = e.clock.t/dt;
					let width = e.dimensions.width, height = e.dimensions.height;
					let y1 = [0, e.dimensions.height, e.dimensions.height, 0][count%4];
					let y2 = [e.dimensions.height, 0, e.dimensions.height, 0][count%4];
					Velocity({	
						elements: elements[count%nshapes].el,
						properties: { strokeOpacity: 1.0, strokeWidth: e.dimensions.width, strokeDasharray: z.tools.randominteger(e.dimensions.min/8, e.dimensions.min/2), x1: e.dimensions.width/2, x2: e.dimensions.width/2, y1: y1, y2: y2 },
						options: { duration: z.tools.randominteger(1000*dt*nshapes/2,1000*dt*nshapes), delay: 0 },
					});
				} catch(err) { z.tools.logerror("line animation 1 ::: " + err ) }
			}
		];
		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			drawings[0](e);
		})
	})(5);
	//circles 1
	( dt => {
		let nshapes = [2,2][z.dimensions.v];
		let width = window.innerWidth, height = window.innerHeight;
		let colors = [[z.data.colors.pigments.black,1], [z.data.colors.pigments.white,1]].reduce( (acc, color, j) => {
			Array.prototype.push.apply(acc,[...Array(color[1]).keys()].reduce( (acc2,k) => { acc2.push(color[0]); return acc2 },[]) );
			return acc;
		}, []);
		const elements = [...Array(nshapes).keys()].reduce( (acc, j) => {
			let el = z.tools.createElement({
				parentel: z.elements["svg"].el, tag: "circle",
				ns: "http://www.w3.org/2000/svg",
				attributes: [ ["cx", width/2], ["cy", height/2], ["stroke", colors[j%colors.length]], ["fill", colors[j%colors.length]] ],
				cssclasses: ["shape", "circle"]
			});
			acc[j] = { el: el };
		return acc;
		}, []);
		const drawings = [
			e => {
				try {
					let count = e.clock.t/dt;
					let r = z.tools.randominteger(e.dimensions.min/2, e.dimensions.min);
					Velocity({	
						elements: elements[count%nshapes].el,
						properties: { fillOpacity: count%2===0 ? 1.0 : 1.0, strokeOpacity: count%2===0 ? 0.0: 0.0, strokeWidth: r/2, strokeDasharray: z.tools.randominteger(r/6, r), cx: e.dimensions.width/2, cy: e.dimensions.height/2, r: r },
						options: { duration: z.tools.randominteger(1000*dt*nshapes/2,1000*dt*nshapes), delay: 0 },
					});
				} catch(err) { z.tools.logerror("circle animation 1 ::: " + err ) }
			},
			
		];
		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			drawings[0](e);
		})
	})(3);
	//lines 2
	( dt => {
		let nshapes = [1,2][z.dimensions.v];
		let width = window.innerWidth, height = window.innerHeight;
		const elements = [...Array(nshapes).keys()].reduce( (acc, j) => {
			// z.tools.logmsg("create line element ::: " + j);
			let el = z.tools.createElement({
				parentel: z.elements["svg"].el, tag: "line",
				ns: "http://www.w3.org/2000/svg",
				attributes: [
					["stroke-width", width], ["stroke-opacity", 0.01],
					["x1", 0], ["x2", width], ["y1", height/2], ["y2", height/2]
				],
				cssclasses: ["shape", "line"]
			});
			acc[j] = { el: el };
		return acc;
		}, []);
		let colors = [[z.data.colors.pigments.black,4], [z.data.colors.pigments.white,6], [z.data.colors.pigments.blue,0], [z.data.colors.pigments.yellow,0], [z.data.colors.pigments.red,0]].reduce( (acc, color, j) => {
			Array.prototype.push.apply(acc,[...Array(color[1]).keys()].reduce( (acc2,k) => { acc2.push(color[0]); return acc2 },[]) );
			return acc;
		}, []);
		const drawings = [
			e => {
				try {
					let count = e.clock.t/dt;
					let width = e.dimensions.width, height = e.dimensions.height;
					let color = colors[z.tools.randominteger(0, colors.length)];
					let x1 = [0, e.dimensions.width, e.dimensions.width, 0][count%4];
					let x2 = [e.dimensions.width, 0, e.dimensions.width, 0][count%4];
					Velocity({	
						elements: elements[count%nshapes].el,
						properties: { strokeOpacity: 1.0, stroke: color, strokeWidth: e.dimensions.height, strokeDasharray: z.tools.randominteger(e.dimensions.min/8, e.dimensions.min/2), x1: x1, x2: x2, y1: e.dimensions.height/2, y2: e.dimensions.height/2 },
						options: { duration: z.tools.randominteger(1000*dt*nshapes/2,1000*dt*nshapes), delay: 0 },
					});
				} catch(err) { z.tools.logerror("line animation 2 ::: " + err ) }
			}
		];
		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			drawings[0](e);
		})
	})(3);
	//circles 1
	( dt => {
		let nshapes = [2,2][z.dimensions.v];
		let width = window.innerWidth, height = window.innerHeight;
		let colors = [[z.data.colors.pigments.white,1], [z.data.colors.pigments.black,1]].reduce( (acc, color, j) => {
			Array.prototype.push.apply(acc,[...Array(color[1]).keys()].reduce( (acc2,k) => { acc2.push(color[0]); return acc2 },[]) );
			return acc;
		}, []);
		const elements = [...Array(nshapes).keys()].reduce( (acc, j) => {
			let el = z.tools.createElement({
				parentel: z.elements["svg"].el, tag: "circle",
				ns: "http://www.w3.org/2000/svg",
				attributes: [ ["cx", width/2], ["cy", height/2], ["stroke", colors[j%colors.length]], ["fill", colors[j%colors.length]] ],
				cssclasses: ["shape", "circle"]
			});
			acc[j] = { el: el };
		return acc;
		}, []);
		const drawings = [
			e => {
				try {
					let count = e.clock.t/dt;
					let r = z.tools.randominteger(e.dimensions.min/10, e.dimensions.min);
					Velocity({	
						elements: elements[count%nshapes].el,
						properties: { fillOpacity: count%2===0 ? 1.0 : 1.0, strokeOpacity: count%2===0 ? 0.0: 0.0, strokeWidth: r/2, strokeDasharray: z.tools.randominteger(r/6, r), cx: e.dimensions.width/2, cy: e.dimensions.height/2, r: r },
						options: { duration: z.tools.randominteger(1000*dt*nshapes/2,1000*dt*nshapes), delay: 0 },
					});
				} catch(err) { z.tools.logerror("circle animation 1 ::: " + err ) }
			},
			
		];
		z.streams["draw"].filter(e => e.clock.t%dt===0).onValue( e => {
			drawings[0](e);
		})
	})(2);
})();

window.addEventListener('load', e => {
	window.scroll(0,0);
	window.setTimeout(() => { document.querySelector("#contentframe").style.opacity = 1.0 }, 400);
	document.documentElement.style.setProperty("--colorx", "#454545")
});
window.addEventListener('beforeunload', e => {
	window.scroll(0,0);
});
</script>
</html>